link(rel="import", href="/lib/polymer/0.2.3/polymer.html")
script(src="bower_components/reconnecting-websocket/index.js")
script(src="/lib/moment.min.js")

polymer-element(name="magma-chat")
  template
    style.
      #top {
        border: 1px solid gray;
        height: 100%;
        position: absolute;
        width: 100%;
        overflow-y: auto;
        overflow-x: hidden;
        display: -webkit-flex;
        display: flex;
        flex-direction: column;
        -webkit-flex-direction: column;
      }
      #histArea {
        flex: auto;
        -webkit-flex: auto;
        overflow-x: hidden;
        overflow-y: scroll;
      }
      #history {

      }
      form {
        flex: none;
        -webkit-flex: none;
      }
      .mine .creator { color: #4b4b4b; }
      .friend .creator{ color: rgb(133, 33, 146); }
      .shortTime {
         font-size: 80%;
         color: gray;
      }
      #history > div {
        background: linear-gradient(to bottom, rgba(255, 255, 255, 0.15) 0%, rgba(0, 0, 0, 0.07) 100%);
        padding: 1px;
        padding-left: 3px;
      }
    #top
      #histArea
        #history
          template(repeat="{{row in history}}")
            div(class="{{row.layout.classes}}")
              div.shortTime {{row.layout.shortTime}}
              div.row
                span.creator {{row.layout.shortSender}}
                | : 
                span.msg {{row.html}}

      form(on-submit="{{submitLine}}")
        | {{mePrompt}}:
        input(type='text', value="{{newMsg}}")
      
      

  script(src="magma-chat.js")
